name: Release

on:
  push:
    tags:
      - "v*.*.*"

jobs:
  release:
    runs-on: windows-latest
    steps:
     - name: Checkout source
       uses: actions/checkout@v4
      
     - name: Setup .NET
       uses: actions/setup-dotnet@v4
       with:
         dotnet-version: '8.x.x'

     - name: Build
       run: dotnet build --configuration Release
        
     - name: Zip the Build
       run: zip -r Mikoto-x64 ./Mikoto/bin/Release/net8.0-windows/win-x64
        
     - name: Create Release and Upload Release Asset
       uses: softprops/action-gh-release@v2
       with:
          tag_name: ${{ github.ref }}
          name: Release ${{ github.ref }}
          body: TODO New Release.
          draft: false
          prerelease: false
          files: Mikoto-x64.zip
